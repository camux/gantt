{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 457673e04d42fcfd51b1","webpack:///./src/Gantt.js","webpack:///./src/gantt.scss?cc5e","webpack:///./src/gantt.scss","webpack:///./node_modules/css-loader/lib/css-base.js","webpack:///./node_modules/style-loader/addStyles.js","webpack:///./src/Bar.js","webpack:///./src/Arrow.js"],"names":["Gantt","element","items","tasks","config","self","init","set_defaults","change_view_mode","change_view_range","on_date_change","unselect_all","view_is","get_bar","trigger_event","refresh","renderInit","start_date","defaults","header_height","column_width","label_width","step","view_modes","bar","height","arrow","curve","padding","view_mode","view_range","moment","date_format","custom_popup_html","Object","assign","reset_variables","document","querySelector","SVGElement","HTMLElement","TypeError","_tasks","_items","itemsIndex","Map","index","keys","key","set","_bars","_arrows","element_groups","updated_tasks","mode","set_scale","prepare","render","range","set_range","prepare_tasks","prepare_dependencies","prepare_dates","prepare_canvas","map","task","i","_start","start","_end","end","diff","_index","startOf","add","clone","invalid","dependencies","deps","split","d","trim","filter","id","generate_id","dependency_map","t","push","gantt_start","gantt_end","length","set_gantt_dates","setup_dates","canvas","Snap","addClass","setup_groups","clear","make_grid","renderBars","make_dates","make_bars","make_arrows","map_arrows_on_bars","set_width","set_scroll_position","bind_grid_click","subtract","endOf","dates","cur_date","groups","group","attr","scale","cur_width","node","getBoundingClientRect","width","actual_width","select","parent_element","parentElement","scroll_pos","get_min_date","scrollLeft","reduce","acc","curr","isSameOrBefore","make_grid_background","make_grid_rows","make_grid_header","make_grid_labels","make_grid_ticks","make_grid_highlights","grid_width","grid_height","size","rect","appendTo","grid","header_width","rows","lines","row_width","row_height","row_y","line","tick_x","tick_y","tick_height","date","tick_class","day","month","path","format","x","y","daysInMonth","item_x","item_y","values","item_text","text","labels","label_x","label_y","label_text","get_dates_to_draw","lower_x","lower_y","lower_text","upper_text","$upper_text","upper_x","upper_y","getBBox","x2","remove","last_date","get_date_info","change_ctx_date","adjust","date_text","year","base_pos","day_upper","x_pos","arrows","dependency","get_task","dep","arr","concat","from_task","to_task","click","details","selectAll","forEach","el","removeClass","modes","Array","isArray","find","name","Math","random","toString","slice","event","args","apply","Bar","gt","draw","bind","action_completed","prepare_values","prepare_plugins","compute_x","compute_y","corner_radius","duration","progress_width","progress","custom_class","bar_group","handle_group","plugin","Element","Paper","global","Fragment","prototype","getX","getY","getWidth","getHeight","getEndX","draw_bar","draw_progress_bar","draw_label","draw_resize_handles","$bar","color","$bar_progress","update_label_position","handle_width","polygon","get_progress_polygon_points","bar_progress","setup_click_event","show_details","bind_resize","bind_drag","bind_resize_progress","popover_group","details_box","render_details","f","shadow","e","get_details_position","transform","html","get_details_html","foreign_object","parse","append","isFunction","end_date","heading","line_1","line_2","get_handles","left","right","drag","onmove_left","onstart","onstop_left","onmove_right","onstop_right","dx","dy","onmove_handle_right","onstop_handle_right","onmove_handle_left","onstop_handle_left","onmove","onstop","handle","on_move","on_start","on_stop","max_dx","min_dx","owidth","finaldx","progress_changed","set_action_completed","ox","oy","run_method_for_dependencies","get_snap_position","update_bar_position","date_changed","fn","dm","deptask","dt","xs","valid_x","prev","update_attr","update_handle_position","update_progressbar_position","update_arrow_position","update_details_position","hasClass","toggleClass","compute_start_end_date","new_start_date","new_end_date","new_progress","compute_progress","setTimeout","x_in_units","width_in_units","parseInt","get","odx","rem","position","value","isNaN","label","update","functionToCheck","getType","call","Arrow","start_x","condition","start_y","end_x","end_y","from_is_below_to","clockwise","curve_y","offset","down_1","down_2"],"mappings":"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AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,oDAAoD,cAAc;;AAElE;AACA;;;;;;;AC3EA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,gBAAgB,mBAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB,sBAAsB;AACtC;AACA;AACA,kBAAkB,2BAA2B;AAC7C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,eAAe,mBAAmB;AAClC;AACA;AACA;AACA;AACA,iBAAiB,2BAA2B;AAC5C;AACA;AACA,QAAQ,uBAAuB;AAC/B;AACA;AACA,GAAG;AACH;AACA,iBAAiB,uBAAuB;AACxC;AACA;AACA,2BAA2B;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,eAAe,iBAAiB;AAChC;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA,gCAAgC,sBAAsB;AACtD;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA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","file":"quick-gantt.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine(\"Gantt\", [], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Gantt\"] = factory();\n\telse\n\t\troot[\"Gantt\"] = factory();\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 457673e04d42fcfd51b1","/* global moment, Snap */\n/**\n * Gantt:\n * \telement: querySelector string, HTML DOM or SVG DOM element, required\n * \titems: object with domain of activities/items\n *    item: { idItem: nameItem }\n * \ttasks: array of tasks, required\n *    task: { id, name, start, end, progress, dependencies, custom_class }\n * \tconfig: configuration options, optional\n */\nimport './gantt.scss';\nimport Bar from './Bar';\nimport Arrow from './Arrow';\n\nexport default function Gantt(element, items, tasks, config) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\n\t\t// expose methods\n\t\tself.change_view_mode = change_view_mode;\n\t\tself.change_view_range = change_view_range;\n\t\tself.on_date_change = on_date_change;\n\t\tself.unselect_all = unselect_all;\n\t\tself.view_is = view_is;\n\t\tself.get_bar = get_bar;\n\t\tself.trigger_event = trigger_event;\n\t\tself.refresh = refresh;\n\n\t\t// initialize canvas\n\t\trenderInit();\n\t\ton_date_change(self.config.start_date);\n\t}\n\n\tfunction set_defaults() {\n\n\t\tconst defaults = {\n\t\t\theader_height: 50,\n\t\t\tcolumn_width: 30,\n\t\t\tlabel_width: 140,\n\t\t\tstep: 24,\n\t\t\tview_modes: [\n\t\t\t\t'Quarter Day',\n\t\t\t\t'Half Day',\n\t\t\t\t'Day',\n\t\t\t\t'Week',\n\t\t\t\t'Month'\n\t\t\t],\n\t\t\tbar: {\n\t\t\t\theight: 28\n\t\t\t},\n\t\t\tarrow: {\n\t\t\t\tcurve: 5\n\t\t\t},\n\t\t\tpadding: 10,\n\t\t\tview_mode: 'Day',\n\t\t\tview_range: 30,\n\t\t\tstart_date: moment(),\n\t\t\tdate_format: 'YYYY-MM-DD',\n\t\t\tcustom_popup_html: null\n\t\t};\n\t\tself.config = Object.assign({}, defaults, config);\n\n\t\treset_variables(tasks);\n\t}\n\n\tfunction reset_variables(tasks) {\n\t\tif(typeof element === 'string') {\n\t\t\tself.element = document.querySelector(element);\n\t\t} else if (element instanceof SVGElement) {\n\t\t\tself.element = element;\n\t\t} else if (element instanceof HTMLElement) {\n\t\t\tself.element = element.querySelector('svg');\n\t\t} else {\n\t\t\tthrow new TypeError('Quick Gantt only supports usage of a string CSS selector,' +\n\t\t\t\t' HTML DOM element or SVG DOM element for the \\'element\\' parameter');\n\t\t}\n\n\t\tself._tasks = tasks;\n\t\tself._items = items;\n\t\tself.itemsIndex = new Map();\n\t\tlet index = 0;\n\t\tfor (let key of items.keys()) {\n\t\t\tself.itemsIndex.set(key, index);\n\t\t\tindex += 1;\n\t\t}\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t\tself.element_groups = {};\n\t}\n\n\tfunction refresh(updated_tasks) {\n\t\treset_variables(updated_tasks);\n\t\tchange_view_mode(self.config.view_mode);\n\t}\n\n\tfunction change_view_mode(mode) {\n\t\tset_scale(mode);\n\t\tprepare();\n\t\trender();\n\t\t// fire viewmode_change event\n\t\ttrigger_event('view_change', [mode]);\n\t}\n\n\tfunction change_view_range(range) {\n\t\tset_range(range);\n\t\tprepare();\n\t\t// render();\n\t\t// // fire viewmode_change event\n\t\t// trigger_event('view_change', [range]);\n\t}\n\n\tfunction on_date_change(start_date) {\n\t\tself.start_date = start_date;\n\t\tprepare();\n\t\trender();\n\t\t// // fire viewmode_change event\n\t\t// trigger_event('view_change', [range]);\n\t}\n\n\tfunction prepare() {\n\t\tprepare_tasks();\n\t\tprepare_dependencies();\n\t\tprepare_dates();\n\t\tprepare_canvas();\n\t}\n\n\tfunction prepare_tasks() {\n\n\t\t// prepare tasks\n\t\tself.tasks = self._tasks.map((task, i) => {\n\n\t\t\t// momentify\n\t\t\ttask._start = moment(task.start, self.config.date_format);\n\t\t\ttask._end = moment(task.end, self.config.date_format);\n\n\t\t\t// make task invalid if duration too large\n\t\t\tif(task._end.diff(task._start, 'years') > 10) {\n\t\t\t\ttask.end = null;\n\t\t\t}\n\n\t\t\t// cache index\n\t\t\ttask._index = i;\n\n\t\t\t// invalid dates\n\t\t\tif(!task.start && !task.end) {\n\t\t\t\ttask._start = moment().startOf('day');\n\t\t\t\ttask._end = moment().startOf('day').add(2, 'days');\n\t\t\t}\n\t\t\tif(!task.start && task.end) {\n\t\t\t\ttask._start = task._end.clone().add(-2, 'days');\n\t\t\t}\n\t\t\tif(task.start && !task.end) {\n\t\t\t\ttask._end = task._start.clone().add(2, 'days');\n\t\t\t}\n\n\t\t\t// invalid flag\n\t\t\tif(!task.start || !task.end) {\n\t\t\t\ttask.invalid = true;\n\t\t\t}\n\n\t\t\t// dependencies\n\t\t\tif(typeof task.dependencies === 'string' || !task.dependencies) {\n\t\t\t\tlet deps = [];\n\t\t\t\tif(task.dependencies) {\n\t\t\t\t\tdeps = task.dependencies\n\t\t\t\t\t\t.split(',')\n\t\t\t\t\t\t.map(d => d.trim())\n\t\t\t\t\t\t.filter((d) => d);\n\t\t\t\t}\n\t\t\t\ttask.dependencies = deps;\n\t\t\t}\n\n\t\t\t// uids\n\t\t\tif(!task.id) {\n\t\t\t\ttask.id = generate_id(task);\n\t\t\t}\n\n\t\t\treturn task;\n\t\t});\n\t}\n\n\tfunction prepare_dependencies() {\n\n\t\tself.dependency_map = {};\n\t\tfor(let t of self.tasks) {\n\t\t\tfor(let d of t.dependencies) {\n\t\t\t\tself.dependency_map[d] = self.dependency_map[d] || [];\n\t\t\t\tself.dependency_map[d].push(t.id);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction prepare_dates() {\n\t\tself.gantt_start = self.gantt_end = null;\n\t\tif (self.tasks.length > 0) {\n\t\t\tfor(let task of self.tasks) {\n\t\t\t\t// set global start and end date\n\t\t\t\tif(!self.gantt_start || task._start < self.gantt_start) {\n\t\t\t\t\tself.gantt_start = task._start;\n\t\t\t\t}\n\t\t\t\tif(!self.gantt_end || task._end > self.gantt_end) {\n\t\t\t\t\tself.gantt_end = task._end;\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (self.start_date) {\n\t\t\t\tself.gantt_start = self.start_date;\n\t\t\t\tself.gantt_end = self.gantt_start.clone().add(self.config.view_range, 'day');\n\t\t\t}\n\t\t}\n\t\tset_gantt_dates();\n\t\tsetup_dates();\n\t}\n\n\tfunction prepare_canvas() {\n\t\tif(self.canvas) return;\n\t\tself.canvas = Snap(self.element).addClass('gantt');\n\t}\n\n\tfunction renderInit() {\n\t\tprepare_canvas();\n\t\tsetup_groups();\n\t\tclear();\n\t}\n\n\tfunction render() {\n\t\tclear();\n\t\tsetup_groups();\n\t\tmake_grid();\n\t\trenderBars();\n\t}\n\n\tfunction clear() {\n\t\tself.canvas.clear();\n\t\tself._bars = [];\n\t\tself._arrows = [];\n\t}\n\n\tfunction renderBars() {\n\t\tmake_dates();\n\t\tmake_bars();\n\t\tmake_arrows();\n\t\tmap_arrows_on_bars();\n\t\tset_width();\n\t\tset_scroll_position();\n\t\tbind_grid_click();\n\t}\n\n\tfunction set_gantt_dates() {\n\n\t\tif(view_is(['Quarter Day', 'Half Day'])) {\n\t\t\tself.gantt_start = self.gantt_start.clone().subtract(7, 'day');\n\t\t\tself.gantt_end = self.gantt_end.clone().add(7, 'day');\n\t\t} else if(view_is('Month')) {\n\t\t\tself.gantt_start = self.gantt_start.clone().startOf('year');\n\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'year');\n\t\t} else {\n\t\t\tif (self.config.view_range) {\n\t\t\t\tself.gantt_start = self.gantt_start.clone().subtract(1, 'day');\n\t\t\t\tself.gantt_end = self.gantt_start.clone().add(self.config.view_range, 'day');\n\t\t\t} else {\n\t\t\t\tself.gantt_start = self.gantt_start.clone().startOf('month').subtract(1, 'month');\n\t\t\t\tself.gantt_end = self.gantt_end.clone().endOf('month').add(1, 'month');\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction setup_dates() {\n\n\t\tself.dates = [];\n\t\tlet cur_date = null;\n\n\t\twhile(cur_date === null || cur_date < self.gantt_end) {\n\t\t\tif(!cur_date) {\n\t\t\t\tcur_date = self.gantt_start.clone();\n\t\t\t} else {\n\t\t\t\tcur_date = view_is('Month') ?\n\t\t\t\t\tcur_date.clone().add(1, 'month') :\n\t\t\t\t\tcur_date.clone().add(self.config.step, 'hours');\n\t\t\t}\n\n\t\t\tself.dates.push(cur_date);\n\t\t}\n\t}\n\n\tfunction setup_groups() {\n\t\tself.element_groups = {};\n\t\tconst groups = ['grid', 'date', 'arrow', 'progress', 'bar', 'details', 'labels'];\n\t\t// make group layers\n\t\tfor(let group of groups) {\n\t\t\tself.element_groups[group] = self.canvas.group().attr({'id': group});\n\t\t}\n\t}\n\n\tfunction set_range(range) {\n\t\tself.config.view_range = range;\n\t};\n\n\tfunction set_scale(scale) {\n\t\tself.config.view_mode = scale;\n\n\t\tif(scale === 'Day') {\n\t\t\tself.config.step = 24;\n\t\t\tself.config.column_width = 70; // 38;\n\t\t} else if(scale === 'Half Day') {\n\t\t\tself.config.step = 24 / 2;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Quarter Day') {\n\t\t\tself.config.step = 24 / 4;\n\t\t\tself.config.column_width = 38;\n\t\t} else if(scale === 'Week') {\n\t\t\tself.config.step = 24 * 7;\n\t\t\tself.config.column_width = 140;\n\t\t} else if(scale === 'Month') {\n\t\t\tself.config.step = 24 * 30;\n\t\t\tself.config.column_width = 120;\n\t\t}\n\t}\n\n\tfunction set_width() {\n\t\tconst cur_width = self.canvas.node.getBoundingClientRect().width;\n\t\tconst actual_width = self.canvas.select('#grid .grid-row').attr('width');\n\t\tif(cur_width < actual_width) {\n\t\t\tself.canvas.attr('width', actual_width);\n\t\t}\n\t}\n\n\tfunction set_scroll_position() {\n\t\tconst parent_element = self.element.parentElement;\n\n\t\tif(!parent_element) return;\n\n\t\tconst scroll_pos = get_min_date().diff(self.gantt_start, 'hours') /\n\t\t\tself.config.step * self.config.column_width - self.config.column_width;\n\t\tparent_element.scrollLeft = scroll_pos;\n\t}\n\n\tfunction get_min_date() {\n\t\tvar start = null;\n\t\tif (self.tasks.length > 0) {\n\t\t\tconst task = self.tasks.reduce((acc, curr) => {\n\t\t\t\treturn curr._start.isSameOrBefore(acc._start) ? curr : acc;\n\t\t\t});\n\t\t\tstart = task._start;\n\t\t} else {\n\t\t\tstart = self.gantt_start;\n\t\t}\n\t\treturn start;\n\t}\n\n\tfunction make_grid() {\n\t\tmake_grid_background();\n\t\tmake_grid_rows();\n\t\tmake_grid_header();\n\t\tmake_grid_labels();\n\t\tmake_grid_ticks();\n\t\tmake_grid_highlights();\n\t}\n\n\tfunction make_grid_background() {\n\n\t\tconst grid_width = self.config.label_width + (self.dates.length * self.config.column_width);\n\t\tconst grid_height = self.config.header_height + self.config.padding +\n\t\t\t\t((self.config.bar.height + self.config.padding) * self._items.size);\n\n\t\tself.canvas.rect(0, 0, grid_width, grid_height)\n\t\t\t.addClass('grid-background')\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\tself.canvas.attr({\n\t\t\theight: grid_height + self.config.padding + 10,\n\t\t\twidth: '100%'\n\t\t});\n\t}\n\n\tfunction make_grid_header() {\n\t\tconst header_width = self.config.label_width + (self.dates.length * self.config.column_width);\n\t\tconst header_height = self.config.header_height + (self.config.padding / 2);\n\t\tself.canvas.rect(0, 0, header_width, header_height)\n\t\t\t.addClass('grid-header')\n\t\t\t.appendTo(self.element_groups.grid);\n\t}\n\n\tfunction make_grid_rows() {\n\t\tconst rows = self.canvas.group().appendTo(self.element_groups.grid);\n\t\tconst lines = self.canvas.group().appendTo(self.element_groups.grid);\n\t\tconst label_width = self.config.column_width * 2;\n\t\tconst row_width = label_width + (self.dates.length * self.config.column_width);\n\n\t\tconst row_height = self.config.bar.height + self.config.padding;\n\n\t\tlet row_y = self.config.header_height + self.config.padding / 2;\n\t\t// row_y = row_y + 40;\n\t\tfor(let task of self._items) { // eslint-disable-line\n\t\t\tself.canvas.rect(0, row_y, row_width, row_height)\n\t\t\t\t.addClass('grid-row')\n\t\t\t\t.appendTo(rows);\n\n\t\t\tself.canvas.line(0, row_y + row_height, row_width, row_y + row_height)\n\t\t\t\t.addClass('row-line')\n\t\t\t\t.appendTo(lines);\n\n\t\t\trow_y += self.config.bar.height + self.config.padding;\n\t\t}\n\t}\n\n\tfunction make_grid_ticks() {\n\t\tlet tick_x = self.config.label_width;\n\t\tlet tick_y = self.config.header_height + self.config.padding / 2;\n\t\tlet tick_height = (self.config.bar.height + self.config.padding) * self._items.size;\n\t\tfor(let date of self.dates) {\n\t\t\tlet tick_class = 'tick';\n\t\t\t// thick tick for monday\n\t\t\tif(view_is('Day') && date.day() === 1) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick tick for first week\n\t\t\tif(view_is('Week') && date.date() >= 1 && date.date() < 8) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\t\t\t// thick ticks for quarters\n\t\t\tif(view_is('Month') && date.month() % 3 === 0) {\n\t\t\t\ttick_class += ' thick';\n\t\t\t}\n\n\t\t\tself.canvas.path(Snap.format('M {x} {y} v {height}', {\n\t\t\t\tx: tick_x,\n\t\t\t\ty: tick_y,\n\t\t\t\theight: tick_height\n\t\t\t}))\n\t\t\t.addClass(tick_class)\n\t\t\t.appendTo(self.element_groups.grid);\n\n\t\t\tif(view_is('Month')) {\n\t\t\t\ttick_x += date.daysInMonth() * self.config.column_width / 30;\n\t\t\t} else {\n\t\t\t\ttick_x += self.config.column_width;\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction make_grid_highlights() {\n\n\t\t// highlight today's date\n\t\tif(view_is('Day')) {\n\t\t\tlet x = moment().startOf('day').diff(self.gantt_start, 'hours') /\n\t\t\t\t\tself.config.step * self.config.column_width;\n\t\t\tx = x + self.config.label_width;\n\t\t\tconst y = 0;\n\t\t\tconst width = self.config.column_width;\n\t\t\tconst height = (self.config.bar.height + self.config.padding) * self._items.size +\n\t\t\t\tself.config.header_height + self.config.padding / 2;\n\n\t\t\tself.canvas.rect(x, y, width, height)\n\t\t\t\t.addClass('today-highlight')\n\t\t\t\t.appendTo(self.element_groups.grid);\n\t\t}\n\t}\n\n\tfunction make_grid_labels() {\n\n\t\tconst item_x = 15;\n\t\tvar step = self.config.bar.height + self.config.padding;\n\t\tvar item_y = self.config.header_height + self.config.padding + (step / 2);\n\t\tfor(let item_text of self._items.values()) {\n\t\t\tself.canvas.text(item_x, item_y, item_text)\n\t\t\t\t.addClass('item-text')\n\t\t\t\t.appendTo(self.element_groups.labels);\n\t\t\titem_y += step;\n\t\t}\n\t}\n\n\tfunction make_dates() {\n\t\t// First keep label text for items in header\n\t\tvar label_x = 0;\n\t\tvar label_y = 0;\n\t\tvar label_text = 'Items';\n\t\tself.canvas.text(label_x, label_y, label_text)\n\t\t\t.addClass('label-text')\n\t\t\t.appendTo(self.element_groups.date);\n\n\t\tfor(let date of get_dates_to_draw()) {\n\t\t\tself.canvas.text(date.lower_x, date.lower_y, date.lower_text)\n\t\t\t\t.addClass('lower-text')\n\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\tif(date.upper_text) {\n\t\t\t\tconst $upper_text = self.canvas.text(date.upper_x, date.upper_y, date.upper_text)\n\t\t\t\t\t.addClass('upper-text')\n\t\t\t\t\t.appendTo(self.element_groups.date);\n\n\t\t\t\t// remove out-of-bound dates\n\t\t\t\tif($upper_text.getBBox().x2 > self.element_groups.grid.getBBox().width) {\n\t\t\t\t\t$upper_text.remove();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction get_dates_to_draw() {\n\t\tlet last_date = null;\n\t\tconst dates = self.dates.map((date, i) => {\n\t\t\tconst d = get_date_info(date, last_date, i);\n\t\t\tlast_date = date;\n\t\t\treturn d;\n\t\t});\n\t\treturn dates;\n\t}\n\n\tfunction get_date_info(date, last_date, i) {\n\t\tvar change_ctx_date = true;\n\t\tvar adjust = 0;\n\n\t\tif (last_date !== null) {\n\t\t\tchange_ctx_date = date.month() !== last_date.month();\n\t\t} else {\n\t\t\tadjust = self.config.column_width;\n\t\t\tlast_date = date.clone().add(1, 'year');\n\t\t}\n\n\t\tconst date_text = {\n\t\t\t'Quarter Day_lower': date.format('HH'),\n\t\t\t'Half Day_lower': date.format('HH'),\n\t\t\t'Day_lower': date.date() !== last_date.date() ? date.format('D') : '',\n\t\t\t'Week_lower': date.month() !== last_date.month() ?\n\t\t\t\tdate.format('D MMM') : date.format('D'),\n\t\t\t'Month_lower': date.format('MMMM'),\n\t\t\t'Quarter Day_upper': date.date() !== last_date.date() ? date.format('D MMM') : '',\n\t\t\t'Half Day_upper': date.date() !== last_date.date() ?\n\t\t\t\tdate.month() !== last_date.month() ?\n\t\t\t\tdate.format('D MMM') : date.format('D') : '',\n\t\t\t'Day_upper': change_ctx_date ? date.format('MMMM') : '',\n\t\t\t'Week_upper': change_ctx_date ? date.format('MMMM') : '',\n\t\t\t'Month_upper': date.year() !== last_date.year() ? date.format('YYYY') : ''\n\t\t};\n\n\t\tconst base_pos = {\n\t\t\tx: self.config.label_width + (i * self.config.column_width),\n\t\t\tlower_y: self.config.header_height,\n\t\t\tupper_y: self.config.header_height - 25\n\t\t};\n\n\t\t// Center day upper\n\t\t// const val = (self.config.column_width * 30) / 2;\n\t\tconst day_upper = (self.config.column_width / 2) + adjust;\n\n\t\tconst x_pos = {\n\t\t\t'Quarter Day_lower': (self.config.column_width * 4) / 2,\n\t\t\t'Quarter Day_upper': 0,\n\t\t\t'Half Day_lower': (self.config.column_width * 2) / 2,\n\t\t\t'Half Day_upper': 0,\n\t\t\t'Day_lower': self.config.column_width / 2,\n\t\t\t'Day_upper': day_upper,\n\t\t\t'Week_lower': 0,\n\t\t\t'Week_upper': (self.config.column_width * 4) / 2,\n\t\t\t'Month_lower': self.config.column_width / 2,\n\t\t\t'Month_upper': (self.config.column_width * 12) / 2\n\t\t};\n\n\t\treturn {\n\t\t\tupper_text: date_text[`${self.config.view_mode}_upper`],\n\t\t\tlower_text: date_text[`${self.config.view_mode}_lower`],\n\t\t\tupper_x: base_pos.x + x_pos[`${self.config.view_mode}_upper`],\n\t\t\tupper_y: base_pos.upper_y,\n\t\t\tlower_x: base_pos.x + x_pos[`${self.config.view_mode}_lower`],\n\t\t\tlower_y: base_pos.lower_y\n\t\t};\n\t}\n\n\tfunction make_arrows() {\n\t\tself._arrows = [];\n\t\tfor(let task of self.tasks) {\n\t\t\tlet arrows = [];\n\t\t\tarrows = task.dependencies.map(dep => {\n\t\t\t\tconst dependency = get_task(dep);\n\t\t\t\tif(!dependency) return;\n\n\t\t\t\tconst arrow = Arrow(\n\t\t\t\t\tself, // gt\n\t\t\t\t\tself._bars[dependency._index], // from_task\n\t\t\t\t\tself._bars[task._index] // to_task\n\t\t\t\t);\n\t\t\t\tself.element_groups.arrow.add(arrow.element);\n\t\t\t\treturn arrow; // eslint-disable-line\n\t\t\t}).filter(arr => arr); // filter falsy values\n\t\t\tself._arrows = self._arrows.concat(arrows);\n\t\t}\n\t}\n\n\tfunction make_bars() {\n\n\t\tself._bars = self.tasks.map((task) => {\n\t\t\tconst bar = Bar(self, task);\n\t\t\tself.element_groups.bar.add(bar.group);\n\t\t\treturn bar;\n\t\t});\n\t}\n\n\tfunction map_arrows_on_bars() {\n\t\tfor(let bar of self._bars) {\n\t\t\tbar.arrows = self._arrows.filter(arrow => {\n\t\t\t\treturn (arrow.from_task.task.id === bar.task.id) ||\n\t\t\t\t\t(arrow.to_task.task.id === bar.task.id);\n\t\t\t});\n\t\t}\n\t}\n\n\tfunction bind_grid_click() {\n\t\tself.element_groups.grid.click(() => {\n\t\t\tunselect_all();\n\t\t\tself.element_groups.details\n\t\t\t\t.selectAll('.details-wrapper')\n\t\t\t\t.forEach(el => el.addClass('hide'));\n\t\t});\n\t}\n\n\tfunction unselect_all() {\n\t\tself.canvas.selectAll('.bar-wrapper').forEach(el => {\n\t\t\tel.removeClass('active');\n\t\t});\n\t}\n\n\tfunction view_is(modes) {\n\t\tif (typeof modes === 'string') {\n\t\t\treturn self.config.view_mode === modes;\n\t\t} else if(Array.isArray(modes)) {\n\t\t\tfor (let mode of modes) {\n\t\t\t\tif(self.config.view_mode === mode) return true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tfunction get_task(id) {\n\t\treturn self.tasks.find((task) => {\n\t\t\treturn task.id === id;\n\t\t});\n\t}\n\n\tfunction get_bar(id) {\n\t\treturn self._bars.find((bar) => {\n\t\t\treturn bar.task.id === id;\n\t\t});\n\t}\n\n\tfunction generate_id(task) {\n\t\treturn task.name + '_' + Math.random().toString(36).slice(2, 12);\n\t}\n\n\tfunction trigger_event(event, args) {\n\t\tif(self.config['on_' + event]) {\n\t\t\tself.config['on_' + event].apply(null, args);\n\t\t}\n\t}\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/eslint-loader!./src/Gantt.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/lib/loader.js?sourceMap!./gantt.scss\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// add the styles to the DOM\nvar update = require(\"!../node_modules/style-loader/addStyles.js\")(content, {});\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/lib/loader.js?sourceMap!./gantt.scss\", function() {\n\t\t\tvar newContent = require(\"!!../node_modules/css-loader/index.js?sourceMap!../node_modules/sass-loader/lib/loader.js?sourceMap!./gantt.scss\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/gantt.scss\n// module id = 1\n// module chunks = 0","exports = module.exports = require(\"../node_modules/css-loader/lib/css-base.js\")(true);\n// imports\n\n\n// module\nexports.push([module.id, \".gantt .grid-background {\\n  fill: none; }\\n\\n.gantt .grid-header {\\n  fill: #ffffff;\\n  stroke: #e0e0e0;\\n  stroke-width: 1.4; }\\n\\n.gantt .grid-row {\\n  fill: #ffffff; }\\n\\n.gantt .grid-row:nth-child(even) {\\n  fill: #f5f5f5; }\\n\\n.gantt .row-line {\\n  stroke: #ebeff2; }\\n\\n.gantt .tick {\\n  stroke: #a6a7a8;\\n  stroke-width: 0.2; }\\n  .gantt .tick.thick {\\n    stroke-width: 0.4; }\\n\\n.gantt .today-highlight {\\n  fill: #fbf1ba;\\n  opacity: 0.5; }\\n\\n.gantt #arrow {\\n  fill: none;\\n  stroke: #666;\\n  stroke-width: 1.4; }\\n\\n.gantt .bar {\\n  stroke: #8D99A6;\\n  stroke-width: 0;\\n  transition: stroke-width .3s ease; }\\n\\n.gantt .bar-progress {\\n  fill: #a3dbff; }\\n\\n.gantt .bar-invalid {\\n  fill: transparent;\\n  stroke: #8D99A6;\\n  stroke-width: 1;\\n  stroke-dasharray: 5; }\\n  .gantt .bar-invalid ~ .bar-label {\\n    fill: #555; }\\n\\n.gantt .bar-label {\\n  fill: #fff;\\n  dominant-baseline: central;\\n  text-anchor: middle;\\n  font-size: 12px;\\n  font-weight: normal; }\\n  .gantt .bar-label.big {\\n    fill: #555;\\n    text-anchor: start; }\\n\\n.gantt .handle {\\n  fill: #ddd;\\n  cursor: ew-resize;\\n  opacity: 0;\\n  visibility: hidden;\\n  transition: opacity .3s ease; }\\n\\n.gantt .bar-wrapper {\\n  cursor: pointer; }\\n  .gantt .bar-wrapper:hover .bar {\\n    stroke-width: 2; }\\n  .gantt .bar-wrapper:hover .handle {\\n    visibility: visible;\\n    opacity: 1; }\\n  .gantt .bar-wrapper.active .bar {\\n    stroke-width: 2; }\\n\\n.gantt .lower-text, .gantt .upper-text {\\n  font-size: 12px;\\n  text-anchor: middle; }\\n\\n.gantt .upper-text {\\n  fill: #555; }\\n\\n.gantt .lower-text {\\n  fill: #333; }\\n\\n.gantt .item-text {\\n  fill: #333;\\n  font-size: 14px; }\\n\\n.gantt #details .details-container {\\n  background: #fff;\\n  display: inline-block;\\n  padding: 12px; }\\n  .gantt #details .details-container h5, .gantt #details .details-container p {\\n    margin: 0; }\\n  .gantt #details .details-container h5 {\\n    font-size: 12px;\\n    font-weight: bold;\\n    margin-bottom: 10px;\\n    color: #555; }\\n  .gantt #details .details-container p {\\n    font-size: 12px;\\n    margin-bottom: 6px;\\n    color: #666; }\\n  .gantt #details .details-container p:last-child {\\n    margin-bottom: 0; }\\n\\n.gantt .hide {\\n  display: none; }\\n\", \"\", {\"version\":3,\"sources\":[\"/mnt/Data/Seafile/Development/TRYTON/TRYTON-4.4/FLASK/quick-gantt/src/src/gantt.scss\"],\"names\":[],\"mappings\":\"AAgBA;EAGE,WAAU,EACV;;AAJF;EAME,cAAa;EACb,gBArBoB;EAsBpB,kBAAiB,EACjB;;AATF;EAWE,cAAa,EACb;;AAZF;EAcE,cA1BgB,EA2BhB;;AAfF;EAiBE,gBA5B0B,EA6B1B;;AAlBF;EAoBE,gBAjCyB;EAkCzB,kBAAiB,EAIjB;EAzBF;IAuBG,kBAAiB,EACjB;;AAxBH;EA2BE,cArCoB;EAsCpB,aAAY,EACZ;;AA7BF;EAgCE,WAAU;EACV,aA1Ce;EA2Cf,kBAAiB,EACjB;;AAnCF;EAuCE,gBAtDkB;EAuDlB,gBAAe;EACf,kCAAiC,EACjC;;AA1CF;EA4CE,cAhDY,EAiDZ;;AA7CF;EA+CE,kBAAiB;EACjB,gBA/DkB;EAgElB,gBAAe;EACf,oBAAmB,EAKnB;EAvDF;IAqDG,WA7Dc,EA8Dd;;AAtDH;EAyDE,WAAU;EACV,2BAA0B;EAC1B,oBAAmB;EACnB,gBAAe;EACf,oBAAmB,EAMnB;EAnEF;IAgEG,WAxEc;IAyEd,mBAAkB,EAClB;;AAlEH;EAsEE,WAxEiB;EAyEjB,kBAAiB;EACjB,WAAU;EACV,mBAAkB;EAClB,6BAA4B,EAC5B;;AA3EF;EA8EE,gBAAe,EAkBf;EAhGF;IAkFI,gBAAe,EACf;EAnFJ;IAsFI,oBAAmB;IACnB,WAAU,EACV;EAxFJ;IA6FI,gBAAe,EACf;;AA9FJ;EAmGE,gBAAe;EACf,oBAAmB,EACnB;;AArGF;EAuGE,WA/Ge,EAgHf;;AAxGF;EA0GE,WAjHe,EAkHf;;AA3GF;EA6GE,WApHe;EAqHf,gBAAe,EACf;;AA/GF;EAkHE,iBAAgB;EAChB,sBAAqB;EACrB,cAAa,EAsBb;EA1IF;IAuHG,UAAS,EACT;EAxHH;IA2HG,gBAAe;IACf,kBAAiB;IACjB,oBAAmB;IACnB,YAtIc,EAuId;EA/HH;IAkIG,gBAAe;IACf,mBAAkB;IAClB,YA7Ic,EA8Id;EArIH;IAwIG,iBAAgB,EAChB;;AAzIH;EA6IE,cAAa,EACb\",\"file\":\"gantt.scss\",\"sourcesContent\":[\"$bar-color: #b8c2cc;\\n$bar-stroke: #8D99A6;\\n$border-color: #e0e0e0;\\n$border-tick-color: #a6a7a8;\\n$light-bg: #f5f5f5;\\n$light-border-color: #ebeff2;\\n$light-yellow: #fbf1ba;\\n$text-muted: #666;\\n$text-light: #555;\\n$text-color: #333;\\n$green: #a3ffaf;\\n$pink: #ffa3b1;\\n$blue: #a3dbff;\\n$gray: #9b9e9f;\\n$handle-color: #ddd;\\n\\n.gantt {\\n\\n\\t.grid-background {\\n\\t\\tfill: none;\\n\\t}\\n\\t.grid-header {\\n\\t\\tfill: #ffffff;\\n\\t\\tstroke: $border-color;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\t.grid-row {\\n\\t\\tfill: #ffffff;\\n\\t}\\n\\t.grid-row:nth-child(even) {\\n\\t\\tfill: $light-bg;\\n\\t}\\n\\t.row-line {\\n\\t\\tstroke: $light-border-color;\\n\\t}\\n\\t.tick {\\n\\t\\tstroke: $border-tick-color;\\n\\t\\tstroke-width: 0.2;\\n\\t\\t&.thick {\\n\\t\\t\\tstroke-width: 0.4;\\n\\t\\t}\\n\\t}\\n\\t.today-highlight {\\n\\t\\tfill: $light-yellow;\\n\\t\\topacity: 0.5;\\n\\t}\\n\\n\\t#arrow {\\n\\t\\tfill: none;\\n\\t\\tstroke: $text-muted;\\n\\t\\tstroke-width: 1.4;\\n\\t}\\n\\n\\t.bar {\\n\\t\\t// fill: $bar-color;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 0;\\n\\t\\ttransition: stroke-width .3s ease;\\n\\t}\\n\\t.bar-progress {\\n\\t\\tfill: $blue;\\n\\t}\\n\\t.bar-invalid {\\n\\t\\tfill: transparent;\\n\\t\\tstroke: $bar-stroke;\\n\\t\\tstroke-width: 1;\\n\\t\\tstroke-dasharray: 5;\\n\\n\\t\\t&~.bar-label {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t}\\n\\t}\\n\\t.bar-label {\\n\\t\\tfill: #fff;\\n\\t\\tdominant-baseline: central;\\n\\t\\ttext-anchor: middle;\\n\\t\\tfont-size: 12px;\\n\\t\\tfont-weight: normal;\\n\\n\\t\\t&.big {\\n\\t\\t\\tfill: $text-light;\\n\\t\\t\\ttext-anchor: start;\\n\\t\\t}\\n\\t}\\n\\n\\t.handle {\\n\\t\\tfill: $handle-color;\\n\\t\\tcursor: ew-resize;\\n\\t\\topacity: 0;\\n\\t\\tvisibility: hidden;\\n\\t\\ttransition: opacity .3s ease;\\n\\t}\\n\\n\\t.bar-wrapper {\\n\\t\\tcursor: pointer;\\n\\n\\t\\t&:hover {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\n\\t\\t\\t.handle {\\n\\t\\t\\t\\tvisibility: visible;\\n\\t\\t\\t\\topacity: 1;\\n\\t\\t\\t}\\n\\t\\t}\\n\\n\\t\\t&.active {\\n\\t\\t\\t.bar {\\n\\t\\t\\t\\tstroke-width: 2;\\n\\t\\t\\t}\\n\\t\\t}\\n\\t}\\n\\n\\t.lower-text, .upper-text {\\n\\t\\tfont-size: 12px;\\n\\t\\ttext-anchor: middle;\\n\\t}\\n\\t.upper-text {\\n\\t\\tfill: $text-light;\\n\\t}\\n\\t.lower-text {\\n\\t\\tfill: $text-color;\\n\\t}\\n\\t.item-text {\\n\\t\\tfill: $text-color;\\n\\t\\tfont-size: 14px;\\n\\t}\\n\\n\\t#details .details-container {\\n\\t\\tbackground: #fff;\\n\\t\\tdisplay: inline-block;\\n\\t\\tpadding: 12px;\\n\\n\\t\\th5, p {\\n\\t\\t\\tmargin: 0;\\n\\t\\t}\\n\\n\\t\\th5 {\\n\\t\\t\\tfont-size: 12px;\\n\\t\\t\\tfont-weight: bold;\\n\\t\\t\\tmargin-bottom: 10px;\\n\\t\\t\\tcolor: $text-light;\\n\\t\\t}\\n\\n\\t\\tp {\\n\\t\\t\\tfont-size: 12px;\\n\\t\\t\\tmargin-bottom: 6px;\\n\\t\\t\\tcolor: $text-muted;\\n\\t\\t}\\n\\n\\t\\tp:last-child {\\n\\t\\t\\tmargin-bottom: 0;\\n\\t\\t}\\n\\t}\\n\\n\\t.hide {\\n\\t\\tdisplay: none;\\n\\t}\\n}\\n\"],\"sourceRoot\":\"\"}]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader?sourceMap!./node_modules/sass-loader/lib/loader.js?sourceMap!./src/gantt.scss\n// module id = 2\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n// css base code, injected by the css-loader\nmodule.exports = function(useSourceMap) {\n\tvar list = [];\n\n\t// return the list of modules as css string\n\tlist.toString = function toString() {\n\t\treturn this.map(function (item) {\n\t\t\tvar content = cssWithMappingToString(item, useSourceMap);\n\t\t\tif(item[2]) {\n\t\t\t\treturn \"@media \" + item[2] + \"{\" + content + \"}\";\n\t\t\t} else {\n\t\t\t\treturn content;\n\t\t\t}\n\t\t}).join(\"\");\n\t};\n\n\t// import a list of modules into the list\n\tlist.i = function(modules, mediaQuery) {\n\t\tif(typeof modules === \"string\")\n\t\t\tmodules = [[null, modules, \"\"]];\n\t\tvar alreadyImportedModules = {};\n\t\tfor(var i = 0; i < this.length; i++) {\n\t\t\tvar id = this[i][0];\n\t\t\tif(typeof id === \"number\")\n\t\t\t\talreadyImportedModules[id] = true;\n\t\t}\n\t\tfor(i = 0; i < modules.length; i++) {\n\t\t\tvar item = modules[i];\n\t\t\t// skip already imported module\n\t\t\t// this implementation is not 100% perfect for weird media query combinations\n\t\t\t//  when a module is imported multiple times with different media queries.\n\t\t\t//  I hope this will never occur (Hey this way we have smaller bundles)\n\t\t\tif(typeof item[0] !== \"number\" || !alreadyImportedModules[item[0]]) {\n\t\t\t\tif(mediaQuery && !item[2]) {\n\t\t\t\t\titem[2] = mediaQuery;\n\t\t\t\t} else if(mediaQuery) {\n\t\t\t\t\titem[2] = \"(\" + item[2] + \") and (\" + mediaQuery + \")\";\n\t\t\t\t}\n\t\t\t\tlist.push(item);\n\t\t\t}\n\t\t}\n\t};\n\treturn list;\n};\n\nfunction cssWithMappingToString(item, useSourceMap) {\n\tvar content = item[1] || '';\n\tvar cssMapping = item[3];\n\tif (!cssMapping) {\n\t\treturn content;\n\t}\n\n\tif (useSourceMap && typeof btoa === 'function') {\n\t\tvar sourceMapping = toComment(cssMapping);\n\t\tvar sourceURLs = cssMapping.sources.map(function (source) {\n\t\t\treturn '/*# sourceURL=' + cssMapping.sourceRoot + source + ' */'\n\t\t});\n\n\t\treturn [content].concat(sourceURLs).concat([sourceMapping]).join('\\n');\n\t}\n\n\treturn [content].join('\\n');\n}\n\n// Adapted from convert-source-map (MIT)\nfunction toComment(sourceMap) {\n\t// eslint-disable-next-line no-undef\n\tvar base64 = btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap))));\n\tvar data = 'sourceMappingURL=data:application/json;charset=utf-8;base64,' + base64;\n\n\treturn '/*# ' + data + ' */';\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/css-loader/lib/css-base.js\n// module id = 3\n// module chunks = 0","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nvar stylesInDom = {},\n\tmemoize = function(fn) {\n\t\tvar memo;\n\t\treturn function () {\n\t\t\tif (typeof memo === \"undefined\") memo = fn.apply(this, arguments);\n\t\t\treturn memo;\n\t\t};\n\t},\n\tisOldIE = memoize(function() {\n\t\treturn /msie [6-9]\\b/.test(self.navigator.userAgent.toLowerCase());\n\t}),\n\tgetHeadElement = memoize(function () {\n\t\treturn document.head || document.getElementsByTagName(\"head\")[0];\n\t}),\n\tsingletonElement = null,\n\tsingletonCounter = 0,\n\tstyleElementsInsertedAtTop = [];\n\nmodule.exports = function(list, options) {\n\tif(typeof DEBUG !== \"undefined\" && DEBUG) {\n\t\tif(typeof document !== \"object\") throw new Error(\"The style-loader cannot be used in a non-browser environment\");\n\t}\n\n\toptions = options || {};\n\t// Force single-tag solution on IE6-9, which has a hard limit on the # of <style>\n\t// tags it will allow on a page\n\tif (typeof options.singleton === \"undefined\") options.singleton = isOldIE();\n\n\t// By default, add <style> tags to the bottom of <head>.\n\tif (typeof options.insertAt === \"undefined\") options.insertAt = \"bottom\";\n\n\tvar styles = listToStyles(list);\n\taddStylesToDom(styles, options);\n\n\treturn function update(newList) {\n\t\tvar mayRemove = [];\n\t\tfor(var i = 0; i < styles.length; i++) {\n\t\t\tvar item = styles[i];\n\t\t\tvar domStyle = stylesInDom[item.id];\n\t\t\tdomStyle.refs--;\n\t\t\tmayRemove.push(domStyle);\n\t\t}\n\t\tif(newList) {\n\t\t\tvar newStyles = listToStyles(newList);\n\t\t\taddStylesToDom(newStyles, options);\n\t\t}\n\t\tfor(var i = 0; i < mayRemove.length; i++) {\n\t\t\tvar domStyle = mayRemove[i];\n\t\t\tif(domStyle.refs === 0) {\n\t\t\t\tfor(var j = 0; j < domStyle.parts.length; j++)\n\t\t\t\t\tdomStyle.parts[j]();\n\t\t\t\tdelete stylesInDom[domStyle.id];\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction addStylesToDom(styles, options) {\n\tfor(var i = 0; i < styles.length; i++) {\n\t\tvar item = styles[i];\n\t\tvar domStyle = stylesInDom[item.id];\n\t\tif(domStyle) {\n\t\t\tdomStyle.refs++;\n\t\t\tfor(var j = 0; j < domStyle.parts.length; j++) {\n\t\t\t\tdomStyle.parts[j](item.parts[j]);\n\t\t\t}\n\t\t\tfor(; j < item.parts.length; j++) {\n\t\t\t\tdomStyle.parts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t} else {\n\t\t\tvar parts = [];\n\t\t\tfor(var j = 0; j < item.parts.length; j++) {\n\t\t\t\tparts.push(addStyle(item.parts[j], options));\n\t\t\t}\n\t\t\tstylesInDom[item.id] = {id: item.id, refs: 1, parts: parts};\n\t\t}\n\t}\n}\n\nfunction listToStyles(list) {\n\tvar styles = [];\n\tvar newStyles = {};\n\tfor(var i = 0; i < list.length; i++) {\n\t\tvar item = list[i];\n\t\tvar id = item[0];\n\t\tvar css = item[1];\n\t\tvar media = item[2];\n\t\tvar sourceMap = item[3];\n\t\tvar part = {css: css, media: media, sourceMap: sourceMap};\n\t\tif(!newStyles[id])\n\t\t\tstyles.push(newStyles[id] = {id: id, parts: [part]});\n\t\telse\n\t\t\tnewStyles[id].parts.push(part);\n\t}\n\treturn styles;\n}\n\nfunction insertStyleElement(options, styleElement) {\n\tvar head = getHeadElement();\n\tvar lastStyleElementInsertedAtTop = styleElementsInsertedAtTop[styleElementsInsertedAtTop.length - 1];\n\tif (options.insertAt === \"top\") {\n\t\tif(!lastStyleElementInsertedAtTop) {\n\t\t\thead.insertBefore(styleElement, head.firstChild);\n\t\t} else if(lastStyleElementInsertedAtTop.nextSibling) {\n\t\t\thead.insertBefore(styleElement, lastStyleElementInsertedAtTop.nextSibling);\n\t\t} else {\n\t\t\thead.appendChild(styleElement);\n\t\t}\n\t\tstyleElementsInsertedAtTop.push(styleElement);\n\t} else if (options.insertAt === \"bottom\") {\n\t\thead.appendChild(styleElement);\n\t} else {\n\t\tthrow new Error(\"Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.\");\n\t}\n}\n\nfunction removeStyleElement(styleElement) {\n\tstyleElement.parentNode.removeChild(styleElement);\n\tvar idx = styleElementsInsertedAtTop.indexOf(styleElement);\n\tif(idx >= 0) {\n\t\tstyleElementsInsertedAtTop.splice(idx, 1);\n\t}\n}\n\nfunction createStyleElement(options) {\n\tvar styleElement = document.createElement(\"style\");\n\tstyleElement.type = \"text/css\";\n\tinsertStyleElement(options, styleElement);\n\treturn styleElement;\n}\n\nfunction createLinkElement(options) {\n\tvar linkElement = document.createElement(\"link\");\n\tlinkElement.rel = \"stylesheet\";\n\tinsertStyleElement(options, linkElement);\n\treturn linkElement;\n}\n\nfunction addStyle(obj, options) {\n\tvar styleElement, update, remove;\n\n\tif (options.singleton) {\n\t\tvar styleIndex = singletonCounter++;\n\t\tstyleElement = singletonElement || (singletonElement = createStyleElement(options));\n\t\tupdate = applyToSingletonTag.bind(null, styleElement, styleIndex, false);\n\t\tremove = applyToSingletonTag.bind(null, styleElement, styleIndex, true);\n\t} else if(obj.sourceMap &&\n\t\ttypeof URL === \"function\" &&\n\t\ttypeof URL.createObjectURL === \"function\" &&\n\t\ttypeof URL.revokeObjectURL === \"function\" &&\n\t\ttypeof Blob === \"function\" &&\n\t\ttypeof btoa === \"function\") {\n\t\tstyleElement = createLinkElement(options);\n\t\tupdate = updateLink.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t\tif(styleElement.href)\n\t\t\t\tURL.revokeObjectURL(styleElement.href);\n\t\t};\n\t} else {\n\t\tstyleElement = createStyleElement(options);\n\t\tupdate = applyToTag.bind(null, styleElement);\n\t\tremove = function() {\n\t\t\tremoveStyleElement(styleElement);\n\t\t};\n\t}\n\n\tupdate(obj);\n\n\treturn function updateStyle(newObj) {\n\t\tif(newObj) {\n\t\t\tif(newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap)\n\t\t\t\treturn;\n\t\t\tupdate(obj = newObj);\n\t\t} else {\n\t\t\tremove();\n\t\t}\n\t};\n}\n\nvar replaceText = (function () {\n\tvar textStore = [];\n\n\treturn function (index, replacement) {\n\t\ttextStore[index] = replacement;\n\t\treturn textStore.filter(Boolean).join('\\n');\n\t};\n})();\n\nfunction applyToSingletonTag(styleElement, index, remove, obj) {\n\tvar css = remove ? \"\" : obj.css;\n\n\tif (styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = replaceText(index, css);\n\t} else {\n\t\tvar cssNode = document.createTextNode(css);\n\t\tvar childNodes = styleElement.childNodes;\n\t\tif (childNodes[index]) styleElement.removeChild(childNodes[index]);\n\t\tif (childNodes.length) {\n\t\t\tstyleElement.insertBefore(cssNode, childNodes[index]);\n\t\t} else {\n\t\t\tstyleElement.appendChild(cssNode);\n\t\t}\n\t}\n}\n\nfunction applyToTag(styleElement, obj) {\n\tvar css = obj.css;\n\tvar media = obj.media;\n\n\tif(media) {\n\t\tstyleElement.setAttribute(\"media\", media)\n\t}\n\n\tif(styleElement.styleSheet) {\n\t\tstyleElement.styleSheet.cssText = css;\n\t} else {\n\t\twhile(styleElement.firstChild) {\n\t\t\tstyleElement.removeChild(styleElement.firstChild);\n\t\t}\n\t\tstyleElement.appendChild(document.createTextNode(css));\n\t}\n}\n\nfunction updateLink(linkElement, obj) {\n\tvar css = obj.css;\n\tvar sourceMap = obj.sourceMap;\n\n\tif(sourceMap) {\n\t\t// http://stackoverflow.com/a/26603875\n\t\tcss += \"\\n/*# sourceMappingURL=data:application/json;base64,\" + btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))) + \" */\";\n\t}\n\n\tvar blob = new Blob([css], { type: \"text/css\" });\n\n\tvar oldSrc = linkElement.href;\n\n\tlinkElement.href = URL.createObjectURL(blob);\n\n\tif(oldSrc)\n\t\tURL.revokeObjectURL(oldSrc);\n}\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/style-loader/addStyles.js\n// module id = 4\n// module chunks = 0","/* global Snap */\n/*\n\tClass: Bar\n\n\tOpts:\n\t\tgt: Gantt object\n\t\ttask: task object\n*/\n\nexport default function Bar(gt, task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tset_defaults();\n\t\tprepare();\n\t\tdraw();\n\t\tbind();\n\t}\n\n\tfunction set_defaults() {\n\t\tself.action_completed = false;\n\t\tself.task = task;\n\t}\n\n\tfunction prepare() {\n\t\tprepare_values();\n\t\tprepare_plugins();\n\t}\n\n\tfunction prepare_values() {\n\t\tself.invalid = self.task.invalid;\n\t\tself.height = gt.config.bar.height;\n\t\tself.x = compute_x();\n\t\tself.y = compute_y();\n\t\tself.corner_radius = 3;\n\t\tself.duration = (self.task._end.diff(self.task._start, 'hours') + 24) / gt.config.step;\n\t\tself.width = gt.config.column_width * self.duration;\n\t\tself.progress_width = gt.config.column_width * self.duration * (self.task.progress / 100) || 0;\n\t\tself.group = gt.canvas.group().addClass('bar-wrapper').addClass(self.task.custom_class || '');\n\t\tself.bar_group = gt.canvas.group().addClass('bar-group').appendTo(self.group);\n\t\tself.handle_group = gt.canvas.group().addClass('handle-group').appendTo(self.group);\n\t}\n\n\tfunction prepare_plugins() {\n\t\tSnap.plugin(function (Snap, Element, Paper, global, Fragment) {\n\t\t\tElement.prototype.getX = function () {\n\t\t\t\treturn +this.attr('x');\n\t\t\t};\n\t\t\tElement.prototype.getY = function () {\n\t\t\t\treturn +this.attr('y');\n\t\t\t};\n\t\t\tElement.prototype.getWidth = function () {\n\t\t\t\treturn +this.attr('width');\n\t\t\t};\n\t\t\tElement.prototype.getHeight = function () {\n\t\t\t\treturn +this.attr('height');\n\t\t\t};\n\t\t\tElement.prototype.getEndX = function () {\n\t\t\t\treturn this.getX() + this.getWidth();\n\t\t\t};\n\t\t});\n\t}\n\n\tfunction draw() {\n\t\tdraw_bar();\n\t\t// draw_state_bar();\n\t\tdraw_progress_bar();\n\t\tdraw_label();\n\t\tdraw_resize_handles();\n\t}\n\n\tfunction draw_bar() {\n\t\tself.$bar = gt.canvas.rect(self.x, self.y,\n\t\t\tself.width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar')\n\t\t\t.appendTo(self.bar_group);\n\t\tif (self.invalid) {\n\t\t\tself.$bar.addClass('bar-invalid');\n\t\t}\n\t\tif (self.task.color) {\n\t\t\tself.$bar.attr('fill', self.task.color);\n\t\t}\n\t}\n\n\tfunction draw_progress_bar() {\n\t\tif (self.invalid) return;\n\t\tself.$bar_progress = gt.canvas.rect(self.x, self.y,\n\t\t\tself.progress_width, self.height,\n\t\t\tself.corner_radius, self.corner_radius)\n\t\t\t.addClass('bar-progress')\n\t\t\t.appendTo(self.bar_group);\n\t}\n\n\tfunction draw_label() {\n\t\tgt.canvas.text(self.x + self.width / 2,\n\t\t\tself.y + self.height / 2,\n\t\t\tself.task.name)\n\t\t\t.addClass('bar-label')\n\t\t\t.appendTo(self.bar_group);\n\t\tupdate_label_position();\n\t}\n\n\tfunction draw_resize_handles() {\n\t\tif (self.invalid) return;\n\n\t\tconst bar = self.$bar,\n\t\t\thandle_width = 8;\n\n\t\tgt.canvas.rect(bar.getX() + bar.getWidth() - 9, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle right')\n\t\t\t.appendTo(self.handle_group);\n\t\tgt.canvas.rect(bar.getX() + 1, bar.getY() + 1,\n\t\t\thandle_width, self.height - 2, self.corner_radius, self.corner_radius)\n\t\t\t.addClass('handle left')\n\t\t\t.appendTo(self.handle_group);\n\n\t\tif (self.task.progress && self.task.progress < 100) {\n\t\t\tgt.canvas.polygon(get_progress_polygon_points())\n\t\t\t\t.addClass('handle progress')\n\t\t\t\t.appendTo(self.handle_group);\n\t\t}\n\t}\n\n\tfunction get_progress_polygon_points() {\n\t\tconst bar_progress = self.$bar_progress;\n\t\treturn [\n\t\t\tbar_progress.getEndX() - 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\tbar_progress.getEndX() + 5, bar_progress.getY() + bar_progress.getHeight(),\n\t\t\tbar_progress.getEndX(), bar_progress.getY() + bar_progress.getHeight() - 8.66\n\t\t];\n\t}\n\n\tfunction bind() {\n\t\tif (self.invalid) return;\n\t\tsetup_click_event();\n\t\tshow_details();\n\t\tbind_resize();\n\t\tbind_drag();\n\t\tbind_resize_progress();\n\t}\n\n\tfunction show_details() {\n\t\tconst popover_group = gt.element_groups.details;\n\t\tself.details_box = popover_group\n\t\t\t.select(`.details-wrapper[data-task='${self.task.id}']`);\n\n\t\tif (!self.details_box) {\n\t\t\tself.details_box = gt.canvas.group()\n\t\t\t\t.addClass('details-wrapper hide')\n\t\t\t\t.attr('data-task', self.task.id)\n\t\t\t\t.appendTo(popover_group);\n\n\t\t\trender_details();\n\n\t\t\tconst f = gt.canvas.filter(\n\t\t\t\tSnap.filter.shadow(0, 1, 1, '#666', 0.6));\n\t\t\tself.details_box.attr({\n\t\t\t\tfilter: f\n\t\t\t});\n\t\t}\n\n\t\tself.group.click((e) => {\n\t\t\tif (self.action_completed) {\n\t\t\t\t// just finished a move action, wait for a few seconds\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tpopover_group.selectAll('.details-wrapper')\n\t\t\t\t.forEach(el => el.addClass('hide'));\n\t\t\tself.details_box.removeClass('hide');\n\t\t});\n\t}\n\n\tfunction render_details() {\n\t\tconst {x, y} = get_details_position();\n\t\tself.details_box.transform(`t${x},${y}`);\n\t\tself.details_box.clear();\n\n\t\tconst html = get_details_html();\n\t\tconst foreign_object =\n\t\t\tSnap.parse(`<foreignObject width=\"5000\" height=\"2000\">\n\t\t\t\t<body xmlns=\"http://www.w3.org/1999/xhtml\">\n\t\t\t\t\t${html}\n\t\t\t\t</body>\n\t\t\t\t</foreignObject>`);\n\t\tself.details_box.append(foreign_object);\n\t}\n\n\tfunction get_details_html() {\n\n\t\t// custom html in config\n\t\tif(gt.config.custom_popup_html) {\n\t\t\tconst html = gt.config.custom_popup_html;\n\t\t\tif(typeof html === 'string') {\n\t\t\t\treturn html;\n\t\t\t}\n\t\t\tif(isFunction(html)) {\n\t\t\t\treturn html(task);\n\t\t\t}\n\t\t}\n\n\t\tconst start_date = self.task._start.format('MMM D');\n\t\tconst end_date = self.task._end.format('MMM D');\n\t\tconst heading = `${self.task.name}: ${start_date} - ${end_date}`;\n\n\t\tconst line_1 = `Duration: ${self.duration} days`;\n\t\tconst line_2 = self.task.progress ? `Progress: ${self.task.progress}` : null;\n\n\t\tconst html = `\n\t\t\t<div class=\"details-container\">\n\t\t\t\t<h5>${heading}</h5>\n\t\t\t\t<p>${line_1}</p>\n\t\t\t\t${\n\t\t\t\t\tline_2 ? `<p>${line_2}</p>` : ''\n\t\t\t\t}\n\t\t\t</div>\n\t\t`;\n\t\treturn html;\n\t}\n\n\tfunction get_details_position() {\n\t\treturn {\n\t\t\tx: self.$bar.getEndX() + 2,\n\t\t\ty: self.$bar.getY() - 10\n\t\t};\n\t}\n\n\tfunction bind_resize() {\n\t\tconst { left, right } = get_handles();\n\n\t\tleft.drag(onmove_left, onstart, onstop_left);\n\t\tright.drag(onmove_right, onstart, onstop_right);\n\n\t\tfunction onmove_right(dx, dy) {\n\t\t\tonmove_handle_right(dx, dy);\n\t\t}\n\t\tfunction onstop_right() {\n\t\t\tonstop_handle_right();\n\t\t}\n\n\t\tfunction onmove_left(dx, dy) {\n\t\t\tonmove_handle_left(dx, dy);\n\t\t}\n\t\tfunction onstop_left() {\n\t\t\tonstop_handle_left();\n\t\t}\n\t}\n\n\tfunction get_handles() {\n\t\treturn {\n\t\t\tleft: self.handle_group.select('.handle.left'),\n\t\t\tright: self.handle_group.select('.handle.right')\n\t\t};\n\t}\n\n\tfunction bind_drag() {\n\t\tself.bar_group.drag(onmove, onstart, onstop);\n\t}\n\n\tfunction bind_resize_progress() {\n\t\tconst bar = self.$bar,\n\t\t\tbar_progress = self.$bar_progress,\n\t\t\thandle = self.group.select('.handle.progress');\n\t\thandle && handle.drag(on_move, on_start, on_stop);\n\n\t\tfunction on_move(dx, dy) {\n\t\t\tif (dx > bar_progress.max_dx) {\n\t\t\t\tdx = bar_progress.max_dx;\n\t\t\t}\n\t\t\tif (dx < bar_progress.min_dx) {\n\t\t\t\tdx = bar_progress.min_dx;\n\t\t\t}\n\n\t\t\tbar_progress.attr('width', bar_progress.owidth + dx);\n\t\t\thandle.attr('points', get_progress_polygon_points());\n\t\t\tbar_progress.finaldx = dx;\n\t\t}\n\t\tfunction on_stop() {\n\t\t\tif (!bar_progress.finaldx) return;\n\t\t\tprogress_changed();\n\t\t\tset_action_completed();\n\t\t}\n\t\tfunction on_start() {\n\t\t\tbar_progress.finaldx = 0;\n\t\t\tbar_progress.owidth = bar_progress.getWidth();\n\t\t\tbar_progress.min_dx = -bar_progress.getWidth();\n\t\t\tbar_progress.max_dx = bar.getWidth() - bar_progress.getWidth();\n\t\t}\n\t}\n\n\tfunction onstart() {\n\t\tconst bar = self.$bar;\n\t\tbar.ox = bar.getX();\n\t\tbar.oy = bar.getY();\n\t\tbar.owidth = bar.getWidth();\n\t\tbar.finaldx = 0;\n\t\trun_method_for_dependencies('onstart');\n\t}\n\tself.onstart = onstart;\n\n\tfunction onmove(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({x: bar.ox + bar.finaldx});\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove = onmove;\n\n\tfunction onstop() {\n\t\tconst bar = self.$bar;\n\t\tif (!bar.finaldx) return;\n\t\tdate_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t}\n\tself.onstop = onstop;\n\n\tfunction onmove_handle_left(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({\n\t\t\tx: bar.ox + bar.finaldx,\n\t\t\twidth: bar.owidth - bar.finaldx\n\t\t});\n\t\trun_method_for_dependencies('onmove', [dx, dy]);\n\t}\n\tself.onmove_handle_left = onmove_handle_left;\n\n\tfunction onstop_handle_left() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t\trun_method_for_dependencies('onstop');\n\t}\n\tself.onstop_handle_left = onstop_handle_left;\n\n\tfunction run_method_for_dependencies(fn, args) {\n\t\tconst dm = gt.dependency_map;\n\t\tif (dm[self.task.id]) {\n\t\t\tfor (let deptask of dm[self.task.id]) {\n\t\t\t\tconst dt = gt.get_bar(deptask);\n\t\t\t\tdt[fn].apply(dt, args);\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onmove_handle_right(dx, dy) {\n\t\tconst bar = self.$bar;\n\t\tbar.finaldx = get_snap_position(dx);\n\t\tupdate_bar_position({width: bar.owidth + bar.finaldx});\n\t}\n\n\tfunction onstop_handle_right() {\n\t\tconst bar = self.$bar;\n\t\tif (bar.finaldx) date_changed();\n\t\tset_action_completed();\n\t}\n\n\tfunction update_bar_position({x = null, width = null}) {\n\t\tconst bar = self.$bar;\n\t\tif (x) {\n\t\t\t// get all x values of parent task\n\t\t\tconst xs = task.dependencies.map(dep => {\n\t\t\t\treturn gt.get_bar(dep).$bar.getX();\n\t\t\t});\n\t\t\t// child task must not go before parent\n\t\t\tconst valid_x = xs.reduce((prev, curr) => {\n\t\t\t\treturn x >= curr;\n\t\t\t}, x);\n\t\t\tif(!valid_x) {\n\t\t\t\twidth = null;\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tupdate_attr(bar, 'x', x);\n\t\t}\n\t\tif (width && width >= gt.config.column_width) {\n\t\t\tupdate_attr(bar, 'width', width);\n\t\t}\n\t\tupdate_label_position();\n\t\tupdate_handle_position();\n\t\tupdate_progressbar_position();\n\t\tupdate_arrow_position();\n\t\tupdate_details_position();\n\t}\n\n\tfunction setup_click_event() {\n\t\tself.group.click(function () {\n\t\t\tif (self.action_completed) {\n\t\t\t\t// just finished a move action, wait for a few seconds\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tif (self.group.hasClass('active')) {\n\t\t\t\tgt.trigger_event('click', [self.task]);\n\t\t\t}\n\t\t\tgt.unselect_all();\n\t\t\tself.group.toggleClass('active');\n\t\t});\n\t}\n\n\tfunction date_changed() {\n\t\tconst { new_start_date, new_end_date } = compute_start_end_date();\n\t\tself.task._start = new_start_date;\n\t\tself.task._end = new_end_date;\n\t\trender_details();\n\t\tgt.trigger_event('date_change',\n\t\t\t[self.task, new_start_date, new_end_date]);\n\t}\n\n\tfunction progress_changed() {\n\t\tconst new_progress = compute_progress();\n\t\tself.task.progress = new_progress;\n\t\trender_details();\n\t\tgt.trigger_event('progress_change',\n\t\t\t[self.task, new_progress]);\n\t}\n\n\tfunction set_action_completed() {\n\t\tself.action_completed = true;\n\t\tsetTimeout(() => self.action_completed = false, 2000);\n\t}\n\n\tfunction compute_start_end_date() {\n\t\tconst bar = self.$bar;\n\t\tconst x_in_units = bar.getX() / gt.config.column_width;\n\t\tconst new_start_date = gt.gantt_start.clone().add(x_in_units * gt.config.step, 'hours');\n\t\tconst width_in_units = bar.getWidth() / gt.config.column_width;\n\t\tconst new_end_date = new_start_date.clone().add(width_in_units * gt.config.step, 'hours');\n\t\t// lets say duration is 2 days\n\t\t// start_date = May 24 00:00:00\n\t\t// end_date = May 24 + 2 days = May 26 (incorrect)\n\t\t// so subtract 1 second so that\n\t\t// end_date = May 25 23:59:59\n\t\tnew_end_date.add('-1', 'seconds');\n\t\treturn { new_start_date, new_end_date };\n\t}\n\n\tfunction compute_progress() {\n\t\tconst progress = self.$bar_progress.getWidth() / self.$bar.getWidth() * 100;\n\t\treturn parseInt(progress, 10);\n\t}\n\n\tfunction compute_x() {\n\t\tlet x = gt.config.label_width + self.task._start.diff(gt.gantt_start, 'hours') /\n\t\t\tgt.config.step * gt.config.column_width;\n\n\t\tif (gt.view_is('Month')) {\n\t\t\tx = self.task._start.diff(gt.gantt_start, 'days') *\n\t\t\t\tgt.config.column_width / 30;\n\t\t}\n\t\treturn x;\n\t}\n\n\tfunction compute_y() {\n\t\tconst _index = gt.itemsIndex.get(self.task.id);\n\t\treturn gt.config.header_height + gt.config.padding +\n\t\t\t_index * (self.height + gt.config.padding);\n\t}\n\n\tfunction get_snap_position(dx) {\n\t\tlet odx = dx, rem, position;\n\n\t\tif (gt.view_is('Week')) {\n\t\t\trem = dx % (gt.config.column_width / 7);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 14) ? 0 : gt.config.column_width / 7);\n\t\t} else if (gt.view_is('Month')) {\n\t\t\trem = dx % (gt.config.column_width / 30);\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 60) ? 0 : gt.config.column_width / 30);\n\t\t} else {\n\t\t\trem = dx % gt.config.column_width;\n\t\t\tposition = odx - rem +\n\t\t\t\t((rem < gt.config.column_width / 2) ? 0 : gt.config.column_width);\n\t\t}\n\t\treturn position;\n\t}\n\n\tfunction update_attr(element, attr, value) {\n\t\tvalue = +value;\n\t\tif (!isNaN(value)) {\n\t\t\telement.attr(attr, value);\n\t\t}\n\t\treturn element;\n\t}\n\n\tfunction update_progressbar_position() {\n\t\tself.$bar_progress.attr('x', self.$bar.getX());\n\t\tself.$bar_progress.attr('width', self.$bar.getWidth() * (self.task.progress / 100));\n\t}\n\n\tfunction update_label_position() {\n\t\tconst bar = self.$bar,\n\t\t\tlabel = self.group.select('.bar-label');\n\t\tif (label.getBBox().width > bar.getWidth()) {\n\t\t\tlabel.addClass('big').attr('x', bar.getX() + bar.getWidth() + 5);\n\t\t} else {\n\t\t\tlabel.removeClass('big').attr('x', bar.getX() + bar.getWidth() / 2);\n\t\t}\n\t}\n\n\tfunction update_handle_position() {\n\t\tconst bar = self.$bar;\n\t\tself.handle_group.select('.handle.left').attr({\n\t\t\t'x': bar.getX() + 1\n\t\t});\n\t\tself.handle_group.select('.handle.right').attr({\n\t\t\t'x': bar.getEndX() - 9\n\t\t});\n\t\tconst handle = self.group.select('.handle.progress');\n\t\thandle && handle.attr('points', get_progress_polygon_points());\n\t}\n\n\tfunction update_arrow_position() {\n\t\tfor (let arrow of self.arrows) {\n\t\t\tarrow.update();\n\t\t}\n\t}\n\n\tfunction update_details_position() {\n\t\tconst {x, y} = get_details_position();\n\t\tself.details_box && self.details_box.transform(`t${x},${y}`);\n\t}\n\n\tfunction isFunction(functionToCheck) {\n\t\tvar getType = {};\n\t\treturn functionToCheck && getType.toString.call(functionToCheck) === '[object Function]';\n\t}\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/eslint-loader!./src/Bar.js","/* global Snap */\n/*\n\tClass: Arrow\n\tfrom_task ---> to_task\n\n\tOpts:\n\t\tgantt (Gantt object)\n\t\tfrom_task (Bar object)\n\t\tto_task (Bar object)\n*/\n\nexport default function Arrow(gt, from_task, to_task) {\n\n\tconst self = {};\n\n\tfunction init() {\n\t\tself.from_task = from_task;\n\t\tself.to_task = to_task;\n\t\tprepare();\n\t\tdraw();\n\t}\n\n\tfunction prepare() {\n\n\t\tself.start_x = from_task.$bar.getX() + from_task.$bar.getWidth() / 2;\n\n\t\tconst condition = () =>\n\t\t\tto_task.$bar.getX() < self.start_x + gt.config.padding &&\n\t\t\t\tself.start_x > from_task.$bar.getX() + gt.config.padding;\n\n\t\twhile(condition()) {\n\t\t\tself.start_x -= 10;\n\t\t}\n\n\t\tself.start_y = gt.config.header_height + gt.config.bar.height +\n\t\t\t(gt.config.padding + gt.config.bar.height) * from_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tself.end_x = to_task.$bar.getX() - gt.config.padding / 2;\n\t\tself.end_y = gt.config.header_height + gt.config.bar.height / 2 +\n\t\t\t(gt.config.padding + gt.config.bar.height) * to_task.task._index +\n\t\t\tgt.config.padding;\n\n\t\tconst from_is_below_to = (from_task.task._index > to_task.task._index);\n\t\tself.curve = gt.config.arrow.curve;\n\t\tself.clockwise = from_is_below_to ? 1 : 0;\n\t\tself.curve_y = from_is_below_to ? -self.curve : self.curve;\n\t\tself.offset = from_is_below_to ?\n\t\t\tself.end_y + gt.config.arrow.curve :\n\t\t\tself.end_y - gt.config.arrow.curve;\n\n\t\tself.path =\n\t\t\tSnap.format('M {start_x} {start_y} V {offset} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t{\n\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\toffset: self.offset,\n\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t});\n\n\t\tif(to_task.$bar.getX() < from_task.$bar.getX() + gt.config.padding) {\n\t\t\tself.path =\n\t\t\t\tSnap.format('M {start_x} {start_y} v {down_1} ' +\n\t\t\t\t'a {curve} {curve} 0 0 1 -{curve} {curve} H {left} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} -{curve} {curve_y} V {down_2} ' +\n\t\t\t\t'a {curve} {curve} 0 0 {clockwise} {curve} {curve_y} ' +\n\t\t\t\t'L {end_x} {end_y} m -5 -5 l 5 5 l -5 5',\n\t\t\t\t\t{\n\t\t\t\t\t\tstart_x: self.start_x,\n\t\t\t\t\t\tstart_y: self.start_y,\n\t\t\t\t\t\tend_x: self.end_x,\n\t\t\t\t\t\tend_y: self.end_y,\n\t\t\t\t\t\tdown_1: gt.config.padding / 2 - self.curve,\n\t\t\t\t\t\tdown_2: to_task.$bar.getY() + to_task.$bar.getHeight() / 2 - self.curve_y,\n\t\t\t\t\t\tleft: to_task.$bar.getX() - gt.config.padding,\n\t\t\t\t\t\toffset: self.offset,\n\t\t\t\t\t\tcurve: self.curve,\n\t\t\t\t\t\tclockwise: self.clockwise,\n\t\t\t\t\t\tcurve_y: self.curve_y\n\t\t\t\t\t});\n\t\t}\n\t}\n\n\tfunction draw() {\n\t\tself.element = gt.canvas.path(self.path)\n\t\t\t.attr('data-from', self.from_task.task.id)\n\t\t\t.attr('data-to', self.to_task.task.id);\n\t}\n\n\tfunction update() { // eslint-disable-line\n\t\tprepare();\n\t\tself.element.attr('d', self.path);\n\t}\n\tself.update = update;\n\n\tinit();\n\n\treturn self;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./node_modules/eslint-loader!./src/Arrow.js"],"sourceRoot":""}